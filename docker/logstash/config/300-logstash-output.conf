output {

    if "logs" in [tags] {

        if [type] == "ui" {
            elasticsearch {
                hosts => ["${ELASTIC_URI}"]
                user => "${ELASTIC_USERNAME}"
                password => "${ELASTIC_PASSWORD}"
                index => "ui-logs-%{+YYYY}"
                document_type => "%{type}"
            }
        }

        else {
            elasticsearch {
                hosts => ["${ELASTIC_URI}"]
                user => "${ELASTIC_USERNAME}"
                password => "${ELASTIC_PASSWORD}"
                index => "app-logs-%{+YYYY}"
                document_type => "%{type}"
            }
        }

    }

    else if "machines_inventory" in [tags] {
        elasticsearch {
            hosts => ["${ELASTIC_URI}"]
            user => "${ELASTIC_USERNAME}"
            password => "${ELASTIC_PASSWORD}"
            index => "machines_inventory-%{+YYYY.MM}"
            document_type => "cost"
        }
    }

    else if "insights" in [tags] and "metrics" in [tags] {
        elasticsearch {
            hosts => ["${ELASTIC_URI}"]
            user => "${ELASTIC_USERNAME}"
            password => "${ELASTIC_PASSWORD}"
            index => "cloudify-metrics-%{+YYYY.MM}"
            document_type => "%{name}"
        }
    }

    else if "exception" in [tags] {
        elasticsearch {
            hosts => ["${ELASTIC_URI}"]
            user => "${ELASTIC_USERNAME}"
            password => "${ELASTIC_PASSWORD}"
            index => "exceptions-%{+xxxx.ww}"
            document_type => "exception"
        }
    }

    else if "gocky" in [tags] {
        http {
            url => "${TSFDB_URI}"
            http_method => "post"
            format => "message"
            message => "dp,gocky=%{gockyId},machine_id=%{machine} counter=%{counter}"
            headers => { "x-org-id" => "%{owner}" }
        }
    }

    else if "portals" in [tags] {
        elasticsearch {
            hosts => ["${ELASTIC_URI}"]
            user => "${ELASTIC_USERNAME}"
            password => "${ELASTIC_PASSWORD}"
            index => "portals-%{+YYYY}"
            document_type => "version"
        }
    }

}
